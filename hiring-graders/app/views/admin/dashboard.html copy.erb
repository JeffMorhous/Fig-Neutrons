<%# Dashboard for the administrator - Assign or Un-assign graders for specific courses %>
<div class="container">
	<div class="row">
		<%# COURSE COLUMN %>
		<div class="col-md-4">
			<% @courses.each do |course| %>
			<div class="card">
				<div class="card-header">
					Recommendation for <%= course.first_name + " " + course.last_name%>
				</div>
				<div class="card-body">
					<h5 class="card-title">CSE <%= course.course_number%></h5>
					<p class="card-text"><%=course.section_number%></p>
					<p class="card-text"><%=course.section_number%></p>
					<p class="card-text"><%=course.semester%></p>
					<p class="card-text"><%=course.is_lab ? 'Y': 'N'%></p>
				</div>
			</div>
			<% end %>
		</div>

		<%# GRADER COLUMN %>
		<div class="col-md-4"></div>

		<%# INFO COLUMN %>
		<div class="col-md-4"></div>
	</div>

</div>
<div class="admin-dashboard">
	<% flash.each do |message_type, message| %>
	<div class="alert alert-<%= message_type %>"><%= message %></div>
	<% end %>
	<h3> Available Courses </h3>
	<p> Select a course from the table to begin and you will be taken to the grader selection screen </p>
	<div class="row form-group">
		<div class="col-md-1">Filter:</div>
		<div class="col-md-4">
			<input class="form-control " id="tableFilterText" type="text" name="tableFilterText" />
		</div>
		<div class="col-md-3">
			<div class="input-group mb-3">
				<div class="input-group-prepend">
					<label class="input-group-text" for="inputGroupSelect01">Semester</label>
				</div>
				<select class="semesterSelect" id="inputGroupSelect01">
					<option value=""></option>
					<option value="SP20">SP20</option>
					<option value="SU20">SU20</option>
				</select>
			</div>
		</div>
		<div class="col-md-1">
			<i class="fa fa-refresh fa-2x" onclick="getCourses()" title="Refresh"></i>
		</div>
	</div>
	<div class="info-table">
		<% if !@courses.empty? %>
		<table>
			<thead>
				<tr>
					<th>Department and Course Number</th>
					<th>Section</th>
					<th>Semester</th>
					<th>Lab</th>
					<th>Days</th>
					<th>Time</th>
					<th>Location</th>
					<th>Instructor</th>
					<th>Has at Least 1 Grader</th>
				</tr>
			</thead>
			<tbody id="courseTable">
				<% @courses.each do |course| %>
				<tr>
					<td>CSE <%= course.course_number %></td>
					<td><%= course.section_number%></td>
					<td><%= course.semester%></td>

					<td>
						<% if course.is_lab%>
						Y
						<% else %>
						N
						<% end %>
					</td>
					<td>
						<% if course.days%>
						<%= course.days %>
						<% else %>
						N/A
						<% end %>
					</td>
					<td>
						<% if course.start_time && course.end_time %>
						<%= course.start_time %> - <%=course.end_time%>
						<% else %>
						N/A
						<% end %>
					</td>
					<td>
						<% if course.location.strip.empty? %>
						N/A
						<% else %>
						<%= course.location %>
						<% end %>
					</td>
					<td><%= course.instructor %></td>
					<td>
						<% if course.have_grader %>
						Yes
						<% else %>
						No
						<% end %>
					</td>
					<td class="hidden">
						<%= button_to '/admin/section/', params: {section_id: course.id}, class: 'btn btn-outline-primary' do %>
						Add Grader
						<% end %>
					</td>
				</tr>
				<% end %>
			</tbody>
		</table>
		<% else %>
		<h3>No courses currently need graders</h3>
		<% end %>
	</div>
</div>